!function(){function t(t,e){for(var n in e)t[n]=e[n];return t}var e="novel-design-static@0.1.0/entries/collections.js",n="novel-design-static@0.1.0/entries/detail.js",i="novel-design-static@0.1.0/entries/index.js",o="seaport-bridge@^0.2.2",a="zepto@^1.1.3",s="fastclick@^1.0.2",d="novel-design-static@0.1.0/lib/common.js",r="spin.js@^2.0.1",c=[e,n,i],l={},m=l;define(i,[o,a,s,d],function(t){function e(){u.spin(document.body),c(".spinner").css({position:"fixed"})}function n(){u.stop()}function i(){c(".error").removeClass("hide")}function o(){c(".error").addClass("hide")}function a(){c(".category-list").removeClass("spread")}function s(){c(".category-list").toggleClass("spread")}function d(t){function s(){e(),t.http.get({domain:m.domain,path:"/api/category"},function(t){return t?(d("最新"),d("最赞"),void t.forEach(function(t){d(t)})):(n(),void i())})}function d(e){var n=c(g.html());n.text(e),n.appendTo(h),l(n[0]),n.on("click",function(){c(".category").removeClass("active"),c(this).addClass("active"),y=c(this).text().trim(),t.data.send({title:c(this).text().trim()}),b="","最新"==y?y="":"最赞"==y&&(y="",b="favs"),C=1,a(),setTimeout(function(){w.addClass("hide"),r()},300)})}function r(){p||(o(),e(),p=!0,t.http.get({domain:m.domain,path:"/api/design",params:{page:C,category:y,order:b}},function(t){return n(),p=!1,t?0==t.length?void m.alert("没有更多咯"):(1==C&&(f.empty(),c(window).scrollTop(0)),t.forEach(function(t){u(t)}),w.removeClass("hide"),void C++):(m.alert("网络连接错误"),void i())}))}function u(e){var n=c(v.html());return n.find(".title").text(e.title),n.find(".description").text(e.description),n.find(".likes .txt").text(e.favs||0),n.on("click",function(){a(),t.data.send({segue:"detail",data:e})}),n.appendTo(f),l(n[0]),n.find(".thumb img")[0].onload=function(){this.style.opacity=1,n.find(".loading").addClass("hide"),setTimeout(function(){n.find(".likes").css("opacity",1)},1300)},n.find(".thumb img").attr("src",e.thumb),n}var p=(c(document).width(),!1),f=c(".design-list"),v=c(".design-template"),h=c(".category-list"),g=c(".category-template"),w=c(".more"),C=1,y="",b="";w.on("click",function(){r()}),s(),r()}var r=t("seaport-bridge"),c=t("zepto"),l=t("fastclick"),m=t("../lib/common"),u=m.spinner;r.connect(function(){s()},d)},{entries:c,map:t(m,{"../lib/common":d})}),define(d,[r],function(t,e){var n=t("spin.js");e.domain="223.4.15.141:8090",e.alert=function(t){var e=document.createElement("IFRAME");e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e),window.frames[0].window.alert(t),e.parentNode.removeChild(e)},e.prompt=function(t){var e=document.createElement("IFRAME");e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e);var n=window.frames[0].window.prompt(t);return e.parentNode.removeChild(e),n},e.spinner=new n({color:"#111111",lines:12,length:9,width:2})},{entries:c,map:m})}();