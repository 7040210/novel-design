!function(){function t(t,n){for(var e in n)t[e]=n[e];return t}var n="novel-design-static@0.1.0/entries/collections.js",e="novel-design-static@0.1.0/entries/detail.js",i="novel-design-static@0.1.0/entries/index.js",a="seaport-bridge@^0.2.2",o="zepto@^1.1.3",d="fastclick@^1.0.2",s="novel-design-static@0.1.0/lib/common.js",c="spin.js@^2.0.1",r=[n,e,i],m={},f=m;define(e,[a,o,d,s],function(t){function n(t){function n(n){function e(t){var n=i(m.html());n.find(".name").text(t.name),n.find("img").attr("src",t.avatar),n.find(".comment").text(t.content),n.appendTo(f)}function d(n){p.find("img").addClass("like-animation"),setTimeout(function(){p.find("span").text("Liked"),p.find("img").removeClass("like-animation")},600);var e=n._id;e&&t.userDefaults.get("favs",function(n){var i=n||[];-1==i.indexOf(e)&&(i.push(e),t.userDefaults.set("favs",i))}),c(n)}function s(n){p.find("span").text("Like");var e=n._id;e&&t.userDefaults.get("favs",function(n){var i=n||[];-1!=i.indexOf(e)&&(i.splice(i.indexOf(e),1),t.userDefaults.set("favs",i))})}function c(n){t.http.post({domain:o.domain,path:"/api/design/"+n._id+"/fav",body:{}},function(){})}var r=i(".detail"),m=i(".comment-template"),f=i(".comments"),l=i(".comment-btn"),u=i(".dialog"),p=(u.find("textarea"),i(".like-btn")),v=i(".buy-area"),g=i(".buy-btn");i(".loading").addClass("hide"),i(".title").text(n.title),i(".description").text(n.description).removeClass("hide"),n.detail.forEach(function(t){var n=new Image;n.src=t.pic,i(n).appendTo(r),n.onload=function(){this.style.opacity=1},t.txt&&i("<p></p>").text(t.txt).appendTo(r)}),n.comments&&n.comments.forEach(function(t){e(t)}),n.buyLink&&(v.removeClass("hide"),g.on("click",function(){t.url.open(n.buyLink)})),p.on("click",function(){"Liked"==p.find("span").text()?s(n):d(n)}),t.userDefaults.get("favs",function(t){var e=t||[];-1!=e.indexOf(n._id)&&p.find("span").text("Liked")}),l.on("click",function(){var i=o.prompt("输入评论");i&&t.http.post({domain:o.domain,path:"/api/design/"+n._id+"/comment",body:{content:i}},function(t){t&&e(t)})}),a(document.body)}t.param.get("data",n)}var e=t("seaport-bridge"),i=t("zepto"),a=t("fastclick"),o=t("../lib/common");e.connect(function(){},n)},{entries:r,map:t({"../lib/common":s},f)}),define(s,[c],function(t,n){var e=t("spin.js");n.domain="106.187.100.229:8090",n.alert=function(t){var n=document.createElement("IFRAME");n.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(n),window.frames[0].window.alert(t),n.parentNode.removeChild(n)},n.prompt=function(t){var n=document.createElement("IFRAME");n.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(n);var e=window.frames[0].window.prompt(t);return n.parentNode.removeChild(n),e},n.spinner=new e({color:"#111111",lines:12,length:9,width:2})},{entries:r,map:f})}();